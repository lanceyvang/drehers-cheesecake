---
const navLinks = [
  { href: '/products', label: 'Shop' },
  { href: '/about', label: 'Our Story' },
];
---

<header class="nav">
  <div class="container">
    <div class="flex items-center justify-between py-4">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-3 group">
        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-gold to-gold-dark flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow">
          <span class="text-white font-display font-bold text-xl">D</span>
        </div>
        <div class="hidden sm:block">
          <h1 class="font-display text-xl font-semibold text-chocolate leading-tight">Dreher's</h1>
          <p class="text-xs text-gold-dark tracking-widest uppercase">Cheesecake</p>
        </div>
      </a>
      
      <!-- Desktop Navigation -->
      <nav class="hidden lg:flex items-center gap-8">
        {navLinks.map(link => (
          <a href={link.href} class="nav-link text-chocolate hover:text-gold-dark">
            {link.label}
          </a>
        ))}
      </nav>
      
      <!-- Actions -->
      <div class="flex items-center gap-4">
        <!-- Account -->
        <a href="/account" class="p-2 text-chocolate hover:text-gold-dark transition-colors" aria-label="Account">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
          </svg>
        </a>
        
        <!-- Cart -->
        <a href="/cart" class="relative p-2 text-chocolate hover:text-gold-dark transition-colors" aria-label="Cart">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
          </svg>
          <span id="cart-count" class="absolute -top-1 -right-1 w-5 h-5 bg-berry text-white text-xs font-bold rounded-full flex items-center justify-center hidden">0</span>
        </a>
        
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="lg:hidden p-2 text-chocolate" aria-label="Menu">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
        </button>
      </div>
    </div>
  </div>
  
  <!-- Mobile Menu -->
  <div id="mobile-menu" class="lg:hidden hidden bg-white border-t border-cream-dark">
    <nav class="container py-4 flex flex-col gap-4">
      {navLinks.map(link => (
        <a href={link.href} class="py-2 text-chocolate hover:text-gold-dark font-medium">
          {link.label}
        </a>
      ))}
      <div class="pt-4 border-t border-cream-dark">
        <a href="/account" class="flex items-center gap-2 py-2 text-chocolate hover:text-gold-dark">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
          </svg>
          My Account
        </a>
      </div>
    </nav>
  </div>
</header>

<script>
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  
  mobileMenuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });
  
  // Update cart count from localStorage
  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const count = cart.reduce((sum: number, item: {quantity: number}) => sum + item.quantity, 0);
    const cartCountEl = document.getElementById('cart-count');
    if (cartCountEl) {
      if (count > 0) {
        cartCountEl.textContent = count.toString();
        cartCountEl.classList.remove('hidden');
      } else {
        cartCountEl.classList.add('hidden');
      }
    }
  }
  
  updateCartCount();
  window.addEventListener('cart-updated', updateCartCount);
</script>
